# Contributing

Contributions are welcome, and they are greatly appreciated.

## Tasks

This project uses [nox](https://nox.thea.codes/en/stable/) to run development tasks. Please check the `noxfile.py` at the root of
the project for more details. You can run any of the following commands and subcommands that corresponds to a particular task:

### Documentation

- `{%- if package_manager == "PDM" -%}pdm docs serve` or `pdm docs{%- else -%}uv run docs{%- endif -%}`: Serve the documentation.
- `{%- if package_manager == "PDM" -%}pdm docs build{%- else -%}uv run docs -- build{%- endif -%}`: Build locally the documentation.

### Formatting

- `{%- if package_manager == "PDM" -%}pdm formatting all` or `pdm formatting{%- else -%}uv run formatting{%- endif -%}`: Format both the code and docstrings.
  - `{%- if package_manager == "PDM" -%}pdm formatting code{%- else -%}uv run formatting -- code{%- endif -%}`: Format only the code.
  - `{%- if package_manager == "PDM" -%}pdm formatting docstrings{%- else -%}uv run formatting -- docstrings{%- endif -%}`: Format only the docstrings.

### Checks

- `{%- if package_manager == "PDM" -%}pdm checks all` or `pdm checks{%- else -%}uv run checks{%- endif -%}`: Run all checks.
  - `{%- if package_manager == "PDM" -%}pdm checks quality{%- else -%}uv run checks -- quality{%- endif -%}`: Check only code quality.
  - `{%- if package_manager == "PDM" -%}pdm checks types{%- else -%}uv run checks -- types{%- endif -%}`: Check only type annotations.
  - `{%- if package_manager == "PDM" -%}pdm checks dependencies{%- else -%}uv run checks -- dependencies{%- endif -%}`: Check only for vulnerabilities in dependencies.

### Tests

- `{%- if package_manager == "PDM" -%}pdm tests{%- else -%}uv run tests{%- endif -%}`: Run the tests.

### Changelog

- `{%- if package_manager == "PDM" -%}pdm changelog{%- else -%}uv run changelog{%- endif -%}`: Build the changelog.

### Release

- `{%- if package_manager == "PDM" -%}pdm release{%- else -%}uv run release{%- endif -%}`: Release a new Python package with an updated version.

## Development

The next steps should be followed during development:

- `git checkout -b new-branch-name` to create a new branch and then modify the code.
- `{%- if package_manager == "PDM" -%}pdm formatting{%- else -%}uv run formatting{%- endif -%}` to auto-format the code and docstrings.
- `{%- if package_manager == "PDM" -%}pdm checks{%- else -%}uv run checks{%- endif -%}` to apply all checks.
- `{%- if package_manager == "PDM" -%}pdm tests{%- else -%}uv run tests{%- endif -%}` to run the tests.
- `{%- if package_manager == "PDM" -%}pdm docs serve{%- else -%}uv run docs{%- endif -%}` if you updated the documentation or the project dependencies to check that everything looks as expected.

## Commit message convention

Commit messages follow conventions based on the [Angular
style](https://gist.github.com/stephenparish/9941e89d80e2bc58a153#format-of-the-commit-message).

### Structure

```bash
<type>(<scope>): <subject>

<body>

<footer>
```

### Example

```
feat(directive): A new feature of code

A description of the new feature.
It contains **important** information.

Issue #10: https://github.com/namespace/project/issues/10
Related to PR namespace/other-project#15: https://github.com/namespace/other-project/pull/15
```

#### Guidelines

- Scope and body are optional.
- Subject and body must be valid Markdown.
- Body must add trailers at the end, for example issues and PR references or co-authors.
- Subject must have proper casing, i.e. uppercase for first letter if it makes sense.
- Subject must have no dot at the end and no punctuation.
- Type can be:
  - `feat`: New feature implementation.
  - `fix`: Bug fix.
  - `docs`: Documentation changes.
  - `style`: Code style or format changes.
  - `refactor`: Changes that are not features or bug fixes.
  - `tests`: Test additions or corrections.
  - `chore`: Maintenance code changes.

## Pull Request guidelines

Link to any related issue in the Pull Request message. We also recommend using fixups:

```bash
git commit --fixup=SHA
```

Once all the changes are approved, you can squash your commits:

```bash
git rebase -i --autosquash master
```

And force-push:

```bash
git push -f
```
